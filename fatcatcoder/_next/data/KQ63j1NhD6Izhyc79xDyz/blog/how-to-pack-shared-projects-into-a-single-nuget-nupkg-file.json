{"pageProps":{"source":{"compiledSource":"var l=Object.defineProperty,d=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var i=Object.getOwnPropertySymbols;var s=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;var p=(e,t,o)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,r=(e,t)=>{for(var o in t||(t={}))s.call(t,o)&&p(e,o,t[o]);if(i)for(var o of i(t))c.call(t,o)&&p(e,o,t[o]);return e},n=(e,t)=>d(e,h(t));var u=(e,t)=>{var o={};for(var a in e)s.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&i)for(var a of i(e))t.indexOf(a)<0&&c.call(e,a)&&(o[a]=e[a]);return o};const makeShortcode=e=>function(o){return console.warn(\"Component \"+e+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",r({},o))},Quoteblock=makeShortcode(\"Quoteblock\"),ProfileCard=makeShortcode(\"ProfileCard\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(o){var a=o,{components:e}=a,t=u(a,[\"components\"]);return mdx(MDXLayout,n(r(r({},layoutProps),t),{components:e,mdxType:\"MDXLayout\"}),mdx(\"h2\",r({},{id:\"start\"}),\"START()\"),mdx(\"p\",null,`Lets say you have a dotnet solution containg more than one project. You need to pack these projects into a single\nnuget file. `),mdx(\"pre\",null,mdx(\"code\",r({parentName:\"pre\"},{className:\"language-bash\"}),`.\n\\u251C\\u2500\\u2500 MySharedProject/\n\\u2502   \\u2514\\u2500\\u2500 *.csproj\n\\u251C\\u2500\\u2500 MySharedProject.Data/\n\\u2502   \\u2514\\u2500\\u2500 *.Data.csproj\n\\u2514\\u2500\\u2500 MySharedProject.sln\n`)),mdx(\"h2\",r({},{id:\"how\"}),\"HOW\"),mdx(\"pre\",null,mdx(\"code\",r({parentName:\"pre\"},{className:\"language-xml\"}),`<Project Sdk=\"Microsoft.NET.Sdk\">\n  <PropertyGroup>\n    <!-- Your Properties Here -->\n      <Name>LibraryProject</Name>\n    <TargetsForTfmSpecificBuildOutput>\n    $(TargetsForTfmSpecificBuildOutput);CopyProjectReferencesToPackage\n    <TargetsForTfmSpecificBuildOutput>\n  </PropertyGroup>\n\n  <!-- Some other installed Nugets -->\n\n  <ItemGroup>\n    <ProjectReference Include=\"..\\\\LibraryProject.Data\\\\LibraryProject.Data.csproj\" />\n  </ItemGroup>\n    \n  <Target DependsOnTargets=\"ResolveReferences\" Name=\"CopyProjectReferencesToPackage\">\n    <ItemGroup>\n      <BuildOutputInPackage Include=\"@(ReferenceCopyLocalPaths->WithMetadataValue('ReferenceSourceTarget', 'ProjectReference'))\"/>\n    </ItemGroup>\n  </Target>\n</Project>\n`)),mdx(\"h2\",r({},{id:\"deep-dives-\"}),\"Deep Dives \\u{1F30A}\"),mdx(\"p\",null,\"What the !%#&@ is \",mdx(\"em\",{parentName:\"p\"},mdx(\"a\",r({parentName:\"em\"},{href:\"https://docs.microsoft.com/en-us/nuget/reference/msbuild-targets#targetsfortfmspecificbuildoutput\"}),\"TargetsForTfmSpecificBuildOutput\")),\"???\"),mdx(Quoteblock,{body:\"Adds files (ie .dlls) from a path into the .nupkg file\",mdxType:\"Quoteblock\"}),mdx(\"p\",null,`The Target & \\u201CBuildOutputInPackage\\u201D ensures that TargetsForTfmSpecificBuildOutput collects the correct\n.dll file AND all of its own references! hate to be missing a third data package nested inside out lovely LibraryProject.Data.csproj`),mdx(\"h2\",r({},{id:\"testing\"}),\"Testing\"),mdx(\"p\",null,`A great way to see it works without directly importing it into another libary is to use\n`,mdx(\"a\",r({parentName:\"p\"},{href:\"https://github.com/NuGetPackageExplorer/NuGetPackageExplorer\"}),\"Nuget Package Explorer\")),mdx(\"p\",null,`After packaging, open the .nupkg file using this tool to see whats contained the the bundle.\nIf everything is there then we have successfully made our lives simpler \\u{1F60A}`),mdx(\"h3\",r({},{id:\"how-deep-does-it-go\"}),\"HOW DEEP DOES IT GO?\"),mdx(\"p\",null,`A MSbuild \\u201CTarget\\u201D groups tasks to be ran together at a certain build stage.\nYou can reference MSB variables in these targets to do cool things like \\u201CReferenceCopyLocalPaths\\u201D allows you\nto gather the array of matched items and operate on it (in our case pack them into a single nuget for portability!)`),mdx(ProfileCard,{mdxType:\"ProfileCard\"}))}MDXContent.isMDXComponent=!0;\n","scope":{"id":1,"title":"How to pack shared projects into a single nuget (.nupkg) file","description":"Ever get that feeling your doing too much work and missing out on too much fun? Using shared libraries helps with that and bundling them in your nugets helps even more...","created":"2022-06-06T15:02:00Z","updated":"2022-06-06T15:02:00Z","img":"https://images.unsplash.com/photo-1649451844808-b81427e7a1f9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80","tags":["C#","dotnet","nuget","devops"],"featured":true}},"frontMatter":{"id":1,"title":"How to pack shared projects into a single nuget (.nupkg) file","description":"Ever get that feeling your doing too much work and missing out on too much fun? Using shared libraries helps with that and bundling them in your nugets helps even more...","created":"2022-06-06T15:02:00Z","updated":"2022-06-06T15:02:00Z","img":"https://images.unsplash.com/photo-1649451844808-b81427e7a1f9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80","tags":["C#","dotnet","nuget","devops"],"featured":true},"title":"How to pack shared projects into a single nuget (.nupkg) file"},"__N_SSG":true}