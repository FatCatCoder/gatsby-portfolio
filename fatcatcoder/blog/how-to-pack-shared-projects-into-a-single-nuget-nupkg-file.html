<!DOCTYPE html><html><head><meta name="description" content="Hello There."/><meta property="og:description" content="Hello There."/><script>
      (function() {
        function getInitialColorMode() {
                const persistedColorPreference = window.localStorage.getItem('nightwind-mode');
                const hasPersistedPreference = typeof persistedColorPreference === 'string';
                if (hasPersistedPreference) {
                  return persistedColorPreference;
                }
                const mql = window.matchMedia('(prefers-color-scheme: dark)');
                const hasMediaQueryPreference = typeof mql.matches === 'boolean';
                if (hasMediaQueryPreference) {
                  return mql.matches ? 'dark' : 'light';
                }
                return 'light';
        }
        getInitialColorMode() == 'light' ? document.documentElement.classList.remove('dark') : document.documentElement.classList.add('dark');
      })()
    </script><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta property="og:title" content="How to pack shared projects into a single nuget (.nupkg) file | FatCatCoder&#x27;s Blog"/><link rel="icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;🚀&lt;/text&gt;&lt;/svg&gt;"/><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><title>How to pack shared projects into a single nuget (.nupkg) file</title><meta name="next-head-count" content="10"/><link rel="preload" href="/fatcatcoder/_next/static/css/0f4b375c4aacea26.css" as="style"/><link rel="stylesheet" href="/fatcatcoder/_next/static/css/0f4b375c4aacea26.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/fatcatcoder/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/fatcatcoder/_next/static/chunks/webpack-b896ef008cadf7aa.js" defer=""></script><script src="/fatcatcoder/_next/static/chunks/framework-a070cbfff3c750c5.js" defer=""></script><script src="/fatcatcoder/_next/static/chunks/main-0a0a278d37b07fed.js" defer=""></script><script src="/fatcatcoder/_next/static/chunks/pages/_app-9fac1e59d7f24701.js" defer=""></script><script src="/fatcatcoder/_next/static/chunks/0c428ae2-ab26e5a330e399e7.js" defer=""></script><script src="/fatcatcoder/_next/static/chunks/8101-8839411393b9ff4d.js" defer=""></script><script src="/fatcatcoder/_next/static/chunks/pages/blog/%5B...slug%5D-f134a5505a03aa9e.js" defer=""></script><script src="/fatcatcoder/_next/static/KQ63j1NhD6Izhyc79xDyz/_buildManifest.js" defer=""></script><script src="/fatcatcoder/_next/static/KQ63j1NhD6Izhyc79xDyz/_ssgManifest.js" defer=""></script></head><body class="[object Object] dark:bg-gray-900 bg-white text-black max-w-100"><div id="__next" data-reactroot=""><base href="/fatcatcoder"/><div><nav class="shadow bg-white dark:bg-gray-900 text-black"><div class="max-w-7xl mx-auto px-2 sm:px-6 lg:px-8"><div class="relative flex justify-between h-16"><div class="absolute inset-y-0 left-0 flex items-center sm:hidden"><button class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500" id="headlessui-disclosure-button-undefined" type="button" aria-expanded="false"><span class="sr-only">Open main menu</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" class="block h-6 w-6"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"></path></svg></button></div><div class="flex-1 flex items-center justify-center sm:items-stretch sm:justify-start"><div class="flex-shrink-0 flex items-center"><a href="/fatcatcoder">FatCatCoder&#x27;s Blog</a><img src="/fatcatcoder/fatcat-real.png" width="30" height="30" class="max-w-xs md:max-w-sm m-auto" style="filter:"/></div><div class="hidden sm:ml-6 sm:flex sm:space-x-8"><a href="/about" class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">About</a><a href="/blog" class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">Blog</a><button><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="my-auto text-yellow-500" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"></path></svg></button><div class="my-auto"><div class="relative inline-block w-10 mr-2 align-middle select-none"><input type="checkbox" name="toggle" id="Gray" class="checked:bg-gray-500 outline-none focus:outline-none right-4 checked:right-0 duration-200 ease-in absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"/><label for="Gray" class="block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"></label></div></div></div></div></div></div></nav><main><div as="div" sx="[object Object]"><article class="prose mx-auto p-6 min-w-[45vw] text-black dark:text-gray-200"><header><div class="mb-6"><h1 class="text-black dark:text-gray-200">How to pack shared projects into a single nuget (.nupkg) file</h1><p class="description text-black dark:text-gray-200">Ever get that feeling your doing too much work and missing out on too much fun? Using shared libraries helps with that and bundling them in your nugets helps even more...</p><p class="description text-[.65rem] text-gray-400 dark:text-gray-500">Created: <!-- -->6/6/2022, 11:02:00 AM<!-- --> \ Updated: <!-- -->6/6/2022, 11:02:00 AM</p></div></header><section><h2 id="start">START()</h2><p>Lets say you have a dotnet solution containg more than one project. You need to pack these projects into a single
nuget file. </p><pre><pre class="prism-code language-bash" style="background-color:init;color:#9a86fd;margin:0;padding:0"><div class="token-line" style="color:#9a86fd"><span class="token builtin class-name">.</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">├── MySharedProject/</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">│   └── *.csproj</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">├── MySharedProject.Data/</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">│   └── *.Data.csproj</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">└── MySharedProject.sln</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><h2 id="how">HOW</h2><pre><pre class="prism-code language-xml" style="background-color:init;color:#9a86fd;margin:0;padding:0"><div class="token-line" style="color:#9a86fd"><span class="token tag punctuation" style="color:#6c6783">&lt;</span><span class="token tag" style="color:#e09142">Project</span><span class="token tag" style="color:#e09142"> </span><span class="token tag attr-name" style="color:#c4b9fe">Sdk</span><span class="token tag attr-value punctuation attr-equals" style="color:#6c6783">=</span><span class="token tag attr-value punctuation" style="color:#6c6783">&quot;</span><span class="token tag attr-value" style="color:#ffcc99">Microsoft.NET.Sdk</span><span class="token tag attr-value punctuation" style="color:#6c6783">&quot;</span><span class="token tag punctuation" style="color:#6c6783">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token tag punctuation" style="color:#6c6783">&lt;</span><span class="token tag" style="color:#e09142">PropertyGroup</span><span class="token tag punctuation" style="color:#6c6783">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token comment" style="color:#6c6783">&lt;!-- Your Properties Here --&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">      </span><span class="token tag punctuation" style="color:#6c6783">&lt;</span><span class="token tag" style="color:#e09142">Name</span><span class="token tag punctuation" style="color:#6c6783">&gt;</span><span class="token plain">LibraryProject</span><span class="token tag punctuation" style="color:#6c6783">&lt;/</span><span class="token tag" style="color:#e09142">Name</span><span class="token tag punctuation" style="color:#6c6783">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token tag punctuation" style="color:#6c6783">&lt;</span><span class="token tag" style="color:#e09142">TargetsForTfmSpecificBuildOutput</span><span class="token tag punctuation" style="color:#6c6783">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    $(TargetsForTfmSpecificBuildOutput);CopyProjectReferencesToPackage</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token tag punctuation" style="color:#6c6783">&lt;</span><span class="token tag" style="color:#e09142">TargetsForTfmSpecificBuildOutput</span><span class="token tag punctuation" style="color:#6c6783">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token tag punctuation" style="color:#6c6783">&lt;/</span><span class="token tag" style="color:#e09142">PropertyGroup</span><span class="token tag punctuation" style="color:#6c6783">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token comment" style="color:#6c6783">&lt;!-- Some other installed Nugets --&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token tag punctuation" style="color:#6c6783">&lt;</span><span class="token tag" style="color:#e09142">ItemGroup</span><span class="token tag punctuation" style="color:#6c6783">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token tag punctuation" style="color:#6c6783">&lt;</span><span class="token tag" style="color:#e09142">ProjectReference</span><span class="token tag" style="color:#e09142"> </span><span class="token tag attr-name" style="color:#c4b9fe">Include</span><span class="token tag attr-value punctuation attr-equals" style="color:#6c6783">=</span><span class="token tag attr-value punctuation" style="color:#6c6783">&quot;</span><span class="token tag attr-value" style="color:#ffcc99">..\LibraryProject.Data\LibraryProject.Data.csproj</span><span class="token tag attr-value punctuation" style="color:#6c6783">&quot;</span><span class="token tag" style="color:#e09142"> </span><span class="token tag punctuation" style="color:#6c6783">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token tag punctuation" style="color:#6c6783">&lt;/</span><span class="token tag" style="color:#e09142">ItemGroup</span><span class="token tag punctuation" style="color:#6c6783">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    </span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token tag punctuation" style="color:#6c6783">&lt;</span><span class="token tag" style="color:#e09142">Target</span><span class="token tag" style="color:#e09142"> </span><span class="token tag attr-name" style="color:#c4b9fe">DependsOnTargets</span><span class="token tag attr-value punctuation attr-equals" style="color:#6c6783">=</span><span class="token tag attr-value punctuation" style="color:#6c6783">&quot;</span><span class="token tag attr-value" style="color:#ffcc99">ResolveReferences</span><span class="token tag attr-value punctuation" style="color:#6c6783">&quot;</span><span class="token tag" style="color:#e09142"> </span><span class="token tag attr-name" style="color:#c4b9fe">Name</span><span class="token tag attr-value punctuation attr-equals" style="color:#6c6783">=</span><span class="token tag attr-value punctuation" style="color:#6c6783">&quot;</span><span class="token tag attr-value" style="color:#ffcc99">CopyProjectReferencesToPackage</span><span class="token tag attr-value punctuation" style="color:#6c6783">&quot;</span><span class="token tag punctuation" style="color:#6c6783">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token tag punctuation" style="color:#6c6783">&lt;</span><span class="token tag" style="color:#e09142">ItemGroup</span><span class="token tag punctuation" style="color:#6c6783">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">      </span><span class="token tag punctuation" style="color:#6c6783">&lt;</span><span class="token tag" style="color:#e09142">BuildOutputInPackage</span><span class="token tag" style="color:#e09142"> </span><span class="token tag attr-name" style="color:#c4b9fe">Include</span><span class="token tag attr-value punctuation attr-equals" style="color:#6c6783">=</span><span class="token tag attr-value punctuation" style="color:#6c6783">&quot;</span><span class="token tag attr-value" style="color:#ffcc99">@(ReferenceCopyLocalPaths-&gt;WithMetadataValue(</span><span class="token tag attr-value punctuation" style="color:#6c6783">&#x27;</span><span class="token tag attr-value" style="color:#ffcc99">ReferenceSourceTarget</span><span class="token tag attr-value punctuation" style="color:#6c6783">&#x27;</span><span class="token tag attr-value" style="color:#ffcc99">, </span><span class="token tag attr-value punctuation" style="color:#6c6783">&#x27;</span><span class="token tag attr-value" style="color:#ffcc99">ProjectReference</span><span class="token tag attr-value punctuation" style="color:#6c6783">&#x27;</span><span class="token tag attr-value" style="color:#ffcc99">))</span><span class="token tag attr-value punctuation" style="color:#6c6783">&quot;</span><span class="token tag punctuation" style="color:#6c6783">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token tag punctuation" style="color:#6c6783">&lt;/</span><span class="token tag" style="color:#e09142">ItemGroup</span><span class="token tag punctuation" style="color:#6c6783">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token tag punctuation" style="color:#6c6783">&lt;/</span><span class="token tag" style="color:#e09142">Target</span><span class="token tag punctuation" style="color:#6c6783">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token tag punctuation" style="color:#6c6783">&lt;/</span><span class="token tag" style="color:#e09142">Project</span><span class="token tag punctuation" style="color:#6c6783">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><h2 id="deep-dives-">Deep Dives 🌊</h2><p>What the !%#&amp;@ is <em><a href="https://docs.microsoft.com/en-us/nuget/reference/msbuild-targets#targetsfortfmspecificbuildoutput">TargetsForTfmSpecificBuildOutput</a></em>???</p><div class="max-w-4xl p-4 text-gray-800 bg-white rounded-lg shadow"><div class="mb-2"><div class="h-3 text-3xl text-left text-gray-600">“</div><p class="px-4 text-sm text-center text-gray-600">Adds files (ie .dlls) from a path into the .nupkg file</p><div class="h-3 text-3xl text-right text-gray-600">”</div></div></div><p>The Target &amp; “BuildOutputInPackage” ensures that TargetsForTfmSpecificBuildOutput collects the correct
.dll file AND all of its own references! hate to be missing a third data package nested inside out lovely LibraryProject.Data.csproj</p><h2 id="testing">Testing</h2><p>A great way to see it works without directly importing it into another libary is to use
<a href="https://github.com/NuGetPackageExplorer/NuGetPackageExplorer">Nuget Package Explorer</a></p><p>After packaging, open the .nupkg file using this tool to see whats contained the the bundle.
If everything is there then we have successfully made our lives simpler 😊</p><h3 id="how-deep-does-it-go">HOW DEEP DOES IT GO?</h3><p>A MSbuild “Target” groups tasks to be ran together at a certain build stage.
You can reference MSB variables in these targets to do cool things like “ReferenceCopyLocalPaths” allows you
to gather the array of matched items and operate on it (in our case pack them into a single nuget for portability!)</p><div class="p-4"><div class="text-center mb-4 opacity-90"><img alt="profil" src="/fatcatcoder/ccavatar.png" class="mx-auto object-cover rounded-full h-40 w-40 "/></div><div class="text-center"><p class="text-2xl text-gray-800 dark:text-white m-0">Christian Claudeaux</p><p class="text-xl text-gray-500 dark:text-gray-200 font-light mt-0 mb-1">Full Stack Developer</p><p class="text-md text-center mx-auto text-gray-500 dark:text-gray-400 max-w-xs py-4 font-light my-1">Composer, Coder, Creator. Microsoft and open source web development Technology specialist <span><a href="/fatcatcoder/about">about.</a></span></p></div><div class="pt-8 flex border-t border-gray-200 w-44 mx-auto text-gray-500 items-center justify-between"><a href="https://github.com/FatCatCoder"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="text-xl hover:text-gray-800 dark:hover:text-white transition-colors duration-200" viewBox="0 0 1792 1792"><path d="M896 128q209 0 385.5 103t279.5 279.5 103 385.5q0 251-146.5 451.5t-378.5 277.5q-27 5-40-7t-13-30q0-3 .5-76.5t.5-134.5q0-97-52-142 57-6 102.5-18t94-39 81-66.5 53-105 20.5-150.5q0-119-79-206 37-91-8-204-28-9-81 11t-92 44l-38 24q-93-26-192-26t-192 26q-16-11-42.5-27t-83.5-38.5-85-13.5q-45 113-8 204-79 87-79 206 0 85 20.5 150t52.5 105 80.5 67 94 39 102.5 18q-39 36-49 103-21 10-45 15t-57 5-65.5-21.5-55.5-62.5q-19-32-48.5-52t-49.5-24l-20-3q-21 0-29 4.5t-5 11.5 9 14 13 12l7 5q22 10 43.5 38t31.5 51l10 23q13 38 44 61.5t67 30 69.5 7 55.5-3.5l23-4q0 38 .5 88.5t.5 54.5q0 18-13 30t-40 7q-232-77-378.5-277.5t-146.5-451.5q0-209 103-385.5t279.5-279.5 385.5-103zm-477 1103q3-7-7-12-10-3-13 2-3 7 7 12 9 6 13-2zm31 34q7-5-2-16-10-9-16-3-7 5 2 16 10 10 16 3zm30 45q9-7 0-19-8-13-17-6-9 5 0 18t17 7zm42 42q8-8-4-19-12-12-20-3-9 8 4 19 12 12 20 3zm57 25q3-11-13-16-15-4-19 7t13 15q15 6 19-6zm63 5q0-13-17-11-16 0-16 11 0 13 17 11 16 0 16-11zm58-10q-2-11-18-9-16 3-14 15t18 8 14-14z"></path></svg></a><a href="https://www.linkedin.com/in/christian-claudeaux-006479225/"><svg width="30" height="30" fill="currentColor" class="text-xl hover:text-gray-800 dark:hover:text-white transition-colors duration-200" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"></path></svg></a><a href="https://twitter.com/CClaudeaux"><svg width="30" height="30" fill="currentColor" class="text-xl hover:text-gray-800 dark:hover:text-white transition-colors duration-200" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"></path></svg></a><a href="https://stackoverflow.com/users/6723894/christian-a"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="28" width="28" xmlns="http://www.w3.org/2000/svg"><path d="M12.412 14.572V10.29h1.428V16H1v-5.71h1.428v4.282h9.984z"></path><path d="M3.857 13.145h7.137v-1.428H3.857v1.428zM10.254 0 9.108.852l4.26 5.727 1.146-.852L10.254 0zm-3.54 3.377 5.484 4.567.913-1.097L7.627 2.28l-.914 1.097zM4.922 6.55l6.47 3.013.603-1.294-6.47-3.013-.603 1.294zm-.925 3.344 6.985 1.469.294-1.398-6.985-1.468-.294 1.397z"></path></svg></a></div></div></section></article></div></main><footer class="grid grid-cols-3 w-full h-24 border-t mt-16"><p class="text-gray-400 text-sm text-center py-8"></p><p class="flex items-center justify-center">Created by<a href="https://christianclaudeaux.com/" target="_blank" rel="noopener noreferrer"><img src="/fatcatcoder/catback.svg" alt="Christian Claudeaux" style="filter:" class="ml-2 h-6 block"/></a></p><div class="flex flex-row-reverse mx-4 gap-4 my-auto"><a href="https://twitter.com/CClaudeaux" target="_blank" class="text-gray-400 hover:text-gray-500 active:text-gray-600 transition duration-100"><svg class="w-5 h-5" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"></path></svg></a><a href="https://www.linkedin.com/in/christian-claudeaux-006479225/" target="_blank" class="text-gray-400 hover:text-gray-500 active:text-gray-600 transition duration-100"><svg class="w-5 h-5" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg></a><a href="https://github.com/FatCatCoder" target="_blank" class="text-gray-400 hover:text-gray-500 active:text-gray-600 transition duration-100"><svg class="w-5 h-5" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"source":{"compiledSource":"var l=Object.defineProperty,d=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var i=Object.getOwnPropertySymbols;var s=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;var p=(e,t,o)=\u003et in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,r=(e,t)=\u003e{for(var o in t||(t={}))s.call(t,o)\u0026\u0026p(e,o,t[o]);if(i)for(var o of i(t))c.call(t,o)\u0026\u0026p(e,o,t[o]);return e},n=(e,t)=\u003ed(e,h(t));var u=(e,t)=\u003e{var o={};for(var a in e)s.call(e,a)\u0026\u0026t.indexOf(a)\u003c0\u0026\u0026(o[a]=e[a]);if(e!=null\u0026\u0026i)for(var a of i(e))t.indexOf(a)\u003c0\u0026\u0026c.call(e,a)\u0026\u0026(o[a]=e[a]);return o};const makeShortcode=e=\u003efunction(o){return console.warn(\"Component \"+e+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",r({},o))},Quoteblock=makeShortcode(\"Quoteblock\"),ProfileCard=makeShortcode(\"ProfileCard\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(o){var a=o,{components:e}=a,t=u(a,[\"components\"]);return mdx(MDXLayout,n(r(r({},layoutProps),t),{components:e,mdxType:\"MDXLayout\"}),mdx(\"h2\",r({},{id:\"start\"}),\"START()\"),mdx(\"p\",null,`Lets say you have a dotnet solution containg more than one project. You need to pack these projects into a single\nnuget file. `),mdx(\"pre\",null,mdx(\"code\",r({parentName:\"pre\"},{className:\"language-bash\"}),`.\n\\u251C\\u2500\\u2500 MySharedProject/\n\\u2502   \\u2514\\u2500\\u2500 *.csproj\n\\u251C\\u2500\\u2500 MySharedProject.Data/\n\\u2502   \\u2514\\u2500\\u2500 *.Data.csproj\n\\u2514\\u2500\\u2500 MySharedProject.sln\n`)),mdx(\"h2\",r({},{id:\"how\"}),\"HOW\"),mdx(\"pre\",null,mdx(\"code\",r({parentName:\"pre\"},{className:\"language-xml\"}),`\u003cProject Sdk=\"Microsoft.NET.Sdk\"\u003e\n  \u003cPropertyGroup\u003e\n    \u003c!-- Your Properties Here --\u003e\n      \u003cName\u003eLibraryProject\u003c/Name\u003e\n    \u003cTargetsForTfmSpecificBuildOutput\u003e\n    $(TargetsForTfmSpecificBuildOutput);CopyProjectReferencesToPackage\n    \u003cTargetsForTfmSpecificBuildOutput\u003e\n  \u003c/PropertyGroup\u003e\n\n  \u003c!-- Some other installed Nugets --\u003e\n\n  \u003cItemGroup\u003e\n    \u003cProjectReference Include=\"..\\\\LibraryProject.Data\\\\LibraryProject.Data.csproj\" /\u003e\n  \u003c/ItemGroup\u003e\n    \n  \u003cTarget DependsOnTargets=\"ResolveReferences\" Name=\"CopyProjectReferencesToPackage\"\u003e\n    \u003cItemGroup\u003e\n      \u003cBuildOutputInPackage Include=\"@(ReferenceCopyLocalPaths-\u003eWithMetadataValue('ReferenceSourceTarget', 'ProjectReference'))\"/\u003e\n    \u003c/ItemGroup\u003e\n  \u003c/Target\u003e\n\u003c/Project\u003e\n`)),mdx(\"h2\",r({},{id:\"deep-dives-\"}),\"Deep Dives \\u{1F30A}\"),mdx(\"p\",null,\"What the !%#\u0026@ is \",mdx(\"em\",{parentName:\"p\"},mdx(\"a\",r({parentName:\"em\"},{href:\"https://docs.microsoft.com/en-us/nuget/reference/msbuild-targets#targetsfortfmspecificbuildoutput\"}),\"TargetsForTfmSpecificBuildOutput\")),\"???\"),mdx(Quoteblock,{body:\"Adds files (ie .dlls) from a path into the .nupkg file\",mdxType:\"Quoteblock\"}),mdx(\"p\",null,`The Target \u0026 \\u201CBuildOutputInPackage\\u201D ensures that TargetsForTfmSpecificBuildOutput collects the correct\n.dll file AND all of its own references! hate to be missing a third data package nested inside out lovely LibraryProject.Data.csproj`),mdx(\"h2\",r({},{id:\"testing\"}),\"Testing\"),mdx(\"p\",null,`A great way to see it works without directly importing it into another libary is to use\n`,mdx(\"a\",r({parentName:\"p\"},{href:\"https://github.com/NuGetPackageExplorer/NuGetPackageExplorer\"}),\"Nuget Package Explorer\")),mdx(\"p\",null,`After packaging, open the .nupkg file using this tool to see whats contained the the bundle.\nIf everything is there then we have successfully made our lives simpler \\u{1F60A}`),mdx(\"h3\",r({},{id:\"how-deep-does-it-go\"}),\"HOW DEEP DOES IT GO?\"),mdx(\"p\",null,`A MSbuild \\u201CTarget\\u201D groups tasks to be ran together at a certain build stage.\nYou can reference MSB variables in these targets to do cool things like \\u201CReferenceCopyLocalPaths\\u201D allows you\nto gather the array of matched items and operate on it (in our case pack them into a single nuget for portability!)`),mdx(ProfileCard,{mdxType:\"ProfileCard\"}))}MDXContent.isMDXComponent=!0;\n","scope":{"id":1,"title":"How to pack shared projects into a single nuget (.nupkg) file","description":"Ever get that feeling your doing too much work and missing out on too much fun? Using shared libraries helps with that and bundling them in your nugets helps even more...","created":"2022-06-06T15:02:00Z","updated":"2022-06-06T15:02:00Z","img":"https://images.unsplash.com/photo-1649451844808-b81427e7a1f9?ixlib=rb-1.2.1\u0026ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8\u0026auto=format\u0026fit=crop\u0026w=1470\u0026q=80","tags":["C#","dotnet","nuget","devops"],"featured":true}},"frontMatter":{"id":1,"title":"How to pack shared projects into a single nuget (.nupkg) file","description":"Ever get that feeling your doing too much work and missing out on too much fun? Using shared libraries helps with that and bundling them in your nugets helps even more...","created":"2022-06-06T15:02:00Z","updated":"2022-06-06T15:02:00Z","img":"https://images.unsplash.com/photo-1649451844808-b81427e7a1f9?ixlib=rb-1.2.1\u0026ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8\u0026auto=format\u0026fit=crop\u0026w=1470\u0026q=80","tags":["C#","dotnet","nuget","devops"],"featured":true},"title":"How to pack shared projects into a single nuget (.nupkg) file"},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["how-to-pack-shared-projects-into-a-single-nuget-nupkg-file"]},"buildId":"KQ63j1NhD6Izhyc79xDyz","assetPrefix":"/fatcatcoder","runtimeConfig":{"basePath":"/fatcatcoder"},"isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>